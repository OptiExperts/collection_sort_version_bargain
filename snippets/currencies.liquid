{% if settings.show_multiple_currencies %}
{{ "//cdn.shopify.com/s/javascripts/currencies.js" | script_tag }}
{{ "jquery.currencies.min.js" | asset_url | script_tag }}
<script>Currency.format = '{{ settings.currency_format | default: 'money_with_currency_format' }}';var shopCurrency = '{{ shop.currency }}';Currency.moneyFormats[shopCurrency].money_with_currency_format = {{ shop.money_with_currency_format | strip_html | json }};Currency.moneyFormats[shopCurrency].money_format = {{ shop.money_format | strip_html | json }};var defaultCurrency = '{{ settings.default_currency | default: shop.currency }}';var cookieCurrency = Currency.cookie.read();if(cookieCurrency!=null){$('.flags').removeClass().addClass('flags flags-' + cookieCurrency);}else{$('.flags').removeClass().addClass('flags flags-' + shopCurrency);}jQuery('span.money span.money').each(function () {jQuery(this).parents('span.money').removeClass('money');});jQuery('span.money').each(function () {jQuery(this).attr('data-currency-{{ shop.currency }}', jQuery(this).html());});if (cookieCurrency == null){if (shopCurrency !== defaultCurrency) {Currency.convertAll(shopCurrency, defaultCurrency);}else{Currency.currentCurrency = defaultCurrency;}}else if(jQuery('.currency-picker').length && jQuery('.currency-picker option[value=' + cookieCurrency + ']').length === 0) {Currency.currentCurrency = shopCurrency;Currency.cookie.write(shopCurrency);}else if(cookieCurrency === shopCurrency){Currency.currentCurrency = shopCurrency;}else{Currency.convertAll(shopCurrency, cookieCurrency);}jQuery('.currency-picker').val(Currency.currentCurrency).change(function () {var newCurrency = jQuery(this).val();$('.flags').removeClass().addClass('flags flags-' + newCurrency);Currency.convertAll(Currency.currentCurrency, newCurrency);jQuery('.selected-currency').text(Currency.currentCurrency);});var original_selectCallback = window.selectCallback;var selectCallback = function (variant, selector) {original_selectCallback(variant, selector);Currency.convertAll(shopCurrency, jQuery('.currency-picker').val());jQuery('.selected-currency').text(Currency.currentCurrency);};$('body').on('ajaxCart.afterCartLoad', function (cart) {Currency.convertAll(shopCurrency, jQuery('.currency-picker').val());jQuery('.selected-currency').text(Currency.currentCurrency);});jQuery('.selected-currency').text(Currency.currentCurrency);</script>
{% endif %}